<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8" />
    <title>Contact Anvi Studio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL FIX: Add Bootstrap and FontAwesome links -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

    <style>
        :root{
            --brand:#ff7c04;
            --dark:#222;
            --muted:#6c757d;
        }
        body { font-family: 'Roboto', sans-serif; color: #222; display: flex; flex-direction: column; min-height: 100vh; }
        .main-content { flex-grow: 1; }
        .main-nav{ background:#000; color:#fff; }

        /* *** FIX: Ensure active links are always clearly visible *** */
        .main-nav .nav-link{ color:#fff; }
        .main-nav .nav-link:hover,
        .main-nav .nav-link.active {
            color: var(--brand); /* Active/Hover color */
            font-weight: 700;    /* Make active link bold */
            border-bottom: 2px solid var(--brand); /* Subtle underline for clarity */
            padding-bottom: 4px;
        }
        /* *** END FIX *** */

        .hero-title { font-family: 'Playfair Display', serif; font-weight: 700; color: #000; }
        .contact-card { border-radius: 12px; }
        .contact-info-block { background-color: var(--brand); color: white; padding: 30px; border-radius: 12px; }
        .btn-brand { background-color: var(--brand); border-color: var(--brand); color: white; }
        .btn-brand:hover { background-color: #cc6300; border-color: #cc6300; }
        /* FIX FOR ICON ALIGNMENT */
        .navbar-nav { align-items: center; }

        /* Customization Link Block Style - REMOVED, but keeping minimal styles for safety */
        .custom-link-block {
            background-color: #fff;
            border: 1px solid #eee;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 30px;
            text-align: center;
        }
        .btn-custom {
            background-color: var(--dark);
            color: white;
            border-color: var(--dark);
            transition: background-color 0.3s;
        }
        .btn-custom:hover {
            background-color: #000;
            color: white;
            border-color: #000;
        }
    </style>
</head>
<body>

<!-- INCLUDE REUSABLE NAVBAR FRAGMENT -->
<!-- We pass the 'currentPage' variable to highlight the active link in the navbar -->
<div th:insert="~{navbar.html :: main-navbar(currentPage='home')}"></div>

<!-- MAIN CONTENT WRAPPER -->
<div class="main-content">
    <section class="py-5">
        <div class="container">
            <h1 class="hero-title display-5 mb-4 text-center">Get In Touch</h1>

            <!-- Flash Messages (set by RedirectAttributes in HomeController) -->
            <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                <span th:text="${successMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <span th:text="${errorMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="row g-4 mt-4">

                <!-- Contact Form -->
                <div class="col-lg-7">
                    <div class="card contact-card shadow p-4 h-100">
                        <h4 class="mb-4">Send Us a Message</h4>
                        <!-- Form posts to /contact, binding to the empty ContactMessage object -->
                        <form th:action="@{/contact}" th:object="${contactMessage}" method="post">

                            <div class="mb-3">
                                <label for="name" class="form-label">Your Name</label>
                                <input type="text" th:field="*{name}" class="form-control" id="name" required>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" th:field="*{email}" class="form-control" id="email" required>
                            </div>

                            <div class="mb-3">
                                <label for="phoneNumber" class="form-label">Phone Number (Optional)</label>
                                <input type="tel" th:field="*{phoneNumber}" class="form-control" id="phoneNumber">
                            </div>

                            <div class="mb-3">
                                <label for="message" class="form-label">Message/Query</label>
                                <textarea th:field="*{message}" class="form-control" id="message" rows="5" required></textarea>
                            </div>

                            <button type="submit" class="btn btn-brand w-100 mt-3">
                                <i class="fa fa-paper-plane me-2"></i> Submit Message
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="col-lg-5">
                    <div class="contact-info-block h-100 shadow-sm">
                        <h4 class="mb-4">Contact Information</h4>
                        <p class="mb-4">We are available during business hours to assist you with any questions about orders, products, or customization requests.</p>

                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-map-marker-alt fa-lg me-3"></i>
                            <div>
                                <p class="mb-0 fw-bold">Studio Address:</p>
                                <p class="mb-0 small">Plot No : 68, Cross 2, 1st Floor, Municipal Employees Colony, Siddartha Nagar, Vijayawada - 520010</p>
                            </div>
                        </div>

                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-envelope fa-lg me-3"></i>
                            <div>
                                <p class="mb-0 fw-bold">Email:</p>
                                <a href="mailto:avnistudio@gmail.com" class="text-white text-decoration-none">avnistudio@gmail.com</a>
                            </div>
                        </div>

                        <div class="d-flex align-items-center">
                            <i class="fab fa-whatsapp fa-lg me-3"></i>
                            <div>
                                <p class="mb-0 fw-bold">WhatsApp:</p>
                                <a href="https://wa.me/919490334557" target="_blank" class="text-white text-decoration-none">+91 9490334557</a>
                            </div>
                        </div>

                        <!-- Placeholder map iframe -->
                        <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3824.2388373303657!2d80.6482618!3d16.5126839!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a4a06d0b3074099%3A0x69666061327137f8!2sVijayawada%2C%20Andhra%20Pradesh%2C%20India!5e0!3m2!1sen!2sin!v1626262626262!5m2!1sen!2sin"
                                width="100%"
                                height="180"
                                style="border:0; margin-top: 20px; border-radius: 8px;"
                                allowfullscreen=""
                                loading="lazy"></iframe>
                    </div>
                </div>

            </div>

            <!-- REMOVED PREVIOUS CUSTOMIZATION BLOCK -->
        </div>
    </section>
</div>
<!-- END MAIN CONTENT WRAPPER -->

<!-- Include the centralized footer fragment -->
<div th:replace="~{footer.html :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
